<Window x:Class="OpenEasyN2N.view.PeersWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="åœ¨çº¿æˆå‘˜" Height="450" Width="650"
        WindowStartupLocation="CenterScreen" WindowStyle="None"
        AllowsTransparency="True" Background="Transparent">

    <Window.Resources>
        <SolidColorBrush x:Key="AccentBrush" Color="#007ACC"/>

        <Style x:Key="CloseButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Border" Background="{TemplateBinding Background}" CornerRadius="0,12,0,0">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#E81123"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ModernDataGrid" TargetType="DataGrid">
            <Setter Property="Background" Value="#121212"/>
            <Setter Property="BorderBrush" Value="#2D2D30"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="RowBackground" Value="Transparent"/>
            <Setter Property="AlternatingRowBackground" Value="#181819"/>
            <Setter Property="Foreground" Value="#CCCCCC"/>
            <Setter Property="GridLinesVisibility" Value="None"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="SelectionMode" Value="Single"/>
            <Setter Property="RowHeaderWidth" Value="0"/>
            <Setter Property="FontSize" Value="13"/>
        </Style>

        <Style TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="#252526"/>
            <Setter Property="Foreground" Value="#888888"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="Padding" Value="12,0"/>
            <Setter Property="BorderThickness" Value="0,0,0,1"/>
            <Setter Property="BorderBrush" Value="#333333"/>
            <Setter Property="FontSize" Value="11"/>
        </Style>

        <Style TargetType="DataGridRow">
            <Setter Property="Height" Value="35"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>

        <Style TargetType="DataGridCell">
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="DataGridCell">
                        <Border Background="Transparent" VerticalAlignment="Center" Padding="12,0">
                            <ContentPresenter VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="Transparent"/>
                    <Setter Property="BorderBrush" Value="{x:Null}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Border CornerRadius="12" Background="#1A1A1B" BorderBrush="#333333" BorderThickness="1">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="35"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <Border Grid.Row="0" Background="#1A1A1B" CornerRadius="12,12,0,0" MouseLeftButtonDown="TitleBar_MouseDown">
                <Grid>
                    <TextBlock Text="åœ¨çº¿æˆå‘˜åˆ—è¡¨ (Peer List)" Foreground="#666666" FontSize="10" Margin="15,0" VerticalAlignment="Center"/>
                    <Button Style="{StaticResource CloseButtonStyle}" Content="âœ•" HorizontalAlignment="Right" Width="45" Foreground="Gray" Click="Close_Click"/>
                </Grid>
            </Border>

            <Border Grid.Row="1" Background="#212122" Margin="15,10,15,5" CornerRadius="6" Padding="15,10">
                <Grid>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="å½“å‰ç¤¾åŒºåœ¨çº¿äººæ•°:" Foreground="#AAAAAA" FontSize="12" VerticalAlignment="Center"/>
                        <TextBlock x:Name="TxtCount" Text="0" Foreground="{StaticResource AccentBrush}" FontWeight="Bold" FontSize="18" Margin="10,-2,0,0" VerticalAlignment="Center"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                        <TextBlock Text="ðŸ’¡ åŒå‡»èŠ‚ç‚¹å¿«é€Ÿå‘èµ· Ping æµ‹è¯•" Foreground="#555555" FontSize="11" VerticalAlignment="Center"/>
                    </StackPanel>
                </Grid>
            </Border>

            <DataGrid x:Name="PeersGrid"
                      Grid.Row="2"
                      Margin="15,5,15,20"
                      Style="{StaticResource ModernDataGrid}"
                      MouseDoubleClick="PeersGrid_MouseDoubleClick"

                      AutoGenerateColumns="False"
                      CanUserAddRows="False"
                      CanUserDeleteRows="False"
                      SelectionUnit="FullRow">

                <DataGrid.Columns>
                    <DataGridTemplateColumn Header="è®¾å¤‡å" Width="0.7*">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBox Text="{Binding Name, Mode=OneWay}"
                                         Foreground="#CCCCCC"
                                         IsReadOnly="True"
                                         Background="Transparent"
                                         BorderThickness="0"
                                         VerticalAlignment="Center"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>


                    <DataGridTemplateColumn Header="è™šæ‹Ÿ IP" Width="1.2*">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBox Text="{Binding VirtualIp, Mode=OneWay}"
                                         Foreground="{StaticResource AccentBrush}"
                                         FontWeight="SemiBold"
                                         VerticalAlignment="Center"
                                         IsReadOnly="True"
                                         Background="Transparent"
                                         BorderThickness="0"
                                         Padding="0"
                                         SelectionOpacity="0.4"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <DataGridTemplateColumn Header="ç‰©ç†åœ°å€" Width="1.5*">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBox Text="{Binding RealAddr, Mode=OneWay}"
                                         Foreground="#CCCCCC"
                                         IsReadOnly="True"
                                         Background="Transparent"
                                         BorderThickness="0"
                                         VerticalAlignment="Center"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <DataGridTemplateColumn Header="MAC åœ°å€" Width="1.2*">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBox Text="{Binding MacAddr, Mode=OneWay}"
                                         Foreground="#CCCCCC"
                                         IsReadOnly="True"
                                         Background="Transparent"
                                         BorderThickness="0"
                                         VerticalAlignment="Center"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <DataGridTemplateColumn Header="ç±»åž‹" Width="0.8*">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Border Background="#333333" CornerRadius="3" Padding="6,2" HorizontalAlignment="Left">
                                    <TextBlock Text="{Binding Type}" Foreground="#AAAAAA" FontSize="10"/>
                                </Border>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>

            <Popup x:Name="PingPopup" AllowsTransparency="True" Placement="Mouse" StaysOpen="False" PopupAnimation="Fade">
                <Border Background="#2D2D30" BorderBrush="{StaticResource AccentBrush}" BorderThickness="1"
                        CornerRadius="6" Padding="12,8" Margin="10">
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="15" Opacity="0.6" ShadowDepth="0" Color="Black"/>
                    </Border.Effect>
                    <StackPanel Orientation="Horizontal">
                        <Ellipse x:Name="PopupDot" Width="8" Height="8" Fill="{StaticResource AccentBrush}" VerticalAlignment="Center" Margin="0,0,10,0">
                            <Ellipse.Style>
                                <Style TargetType="Ellipse">
                                    <Style.Triggers>
                                        <EventTrigger RoutedEvent="Loaded">
                                            <BeginStoryboard>
                                                <Storyboard RepeatBehavior="Forever">
                                                    <DoubleAnimation Storyboard.TargetProperty="Opacity" From="1" To="0.3" Duration="0:0:0.6" AutoReverse="True"/>
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </EventTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Ellipse.Style>
                        </Ellipse>
                        <TextBlock x:Name="PopupText" Text="æ­£åœ¨æµ‹è¯•å“åº”æ—¶é—´..." Foreground="White" FontSize="11" VerticalAlignment="Center"/>
                    </StackPanel>
                </Border>
            </Popup>
        </Grid>
    </Border>
</Window>